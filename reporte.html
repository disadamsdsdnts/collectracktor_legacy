<!DOCTYPE html>
<html>
<head>
	<style type="text/css">
		img{
			max-width: 150px;
		}
	</style>
	<title>Reporta una url</title>
	<script type="text/javascript" src="./js/jquery-3.3.1.min.js"></script>
	<script type="text/javascript">
		$(document).ready(function() {
			alert("Hola");
			function allCorrect(){
				document.getElementById("status").innerHTML = "<img src='./img/success.gif'><h1>" + "Reporte recibido. Muchas gracias por tu aporte." + "</h1>";
			};

			function allWrong(){
				document.getElementById("status").innerHTML = "<img src='./img/wrong.gif'><h1>" + "Ha habido un problema. Vuelva a intentarlo m√°s tarde." + "</h1>";
			};

			function restart(){
				document.getElementById("status").innerHTML = "<img src='./img/loading.gif'> <h1> Subiendo... </h1>";
				$("#status").css('display', 'none');
				$("#submitURL").val("");
			};

			$("#submitButton").click(function(e) {
				e.preventDefault();

				var form = document.getElementById("reportForm");

				$.ajax({
				    type: 'POST',
				    url: './reporting.php',
				    data: $("#reportForm").serialize(),
				    beforeSend: function () {
	                    $("#status").css('display', 'inline');
	               	}
				}).done(function (response){
                    setTimeout(function(){
                    	if (response == "allWrong"){
                    		allWrong();
                    	} else {
                    		allCorrect();
                    	}
			    	}, 3000);

			    	setTimeout(function(){
			    		restart();
			    	}, 7000);
                })				
            });
		});
	</script>
</head>
<body>
	<h1>Reporta una url</h1>

	<form method="POST" id="reportForm">
		<input type="url" name="direccion" id="submitURL">
		<input type="submit" name="enviar" id="submitButton">
	</form>

	<div id="status" style="display: none;">
		<img src="./img/loading.gif">
		<h1>
			Subiendo...
		</h1>
	</div>
	</form>
</body>
</html>